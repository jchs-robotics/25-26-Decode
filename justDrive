package org.firstinspires.ftc.teamcode.opmodes.teleop;

import com.arcrobotics.ftclib.command.CommandOpMode;
import com.arcrobotics.ftclib.command.CommandScheduler;
import com.arcrobotics.ftclib.gamepad.GamepadEx;
import com.qualcomm.robotcore.eventloop.opmode.TeleOp;

import org.firstinspires.ftc.teamcode.components.subsystems.DriveSubsystem;

@TeleOp(name = "Drivetrain")
public class justDrive extends CommandOpMode {
    private GamepadEx driveController;
    private DriveSubsystem driveSubsystem;

    @Override
    public void initialize() {
        CommandScheduler.getInstance().reset();

        driveController = new GamepadEx(gamepad1);

        driveSubsystem = new DriveSubsystem(
                hardwareMap,
                "leftFront", "leftBack",
                "rightFront", "rightBack",
                "imu"
        );

        driveSubsystem.initializeDrive();
    }

    @Override
    public void run() {
        CommandScheduler.getInstance().run();

        // Reset IMU yaw
        if (gamepad1.back) {
            driveSubsystem.resetYaw();
        }

        // ~~~~~~~~~~ MANUAL CONTROLS ~~~~~~~~~~ //
        double x = driveController.getLeftX();     // strafe
        double y = -driveController.getLeftY();    // forward/backward (negate because up on stick is negative)
        double turn = driveController.getRightX(); // rotation

        // Send joystick values to the drive subsystem
        driveSubsystem.driveFieldCentric(x, y, turn);
    }
}
